/*
 * jquery.flexorder.js 1.2
 *
 * Copyright 2013, Tommy Fisher http://www.tommyfisher.net
 *
 */
!function(t){"use strict";var e=0;t.fn.flexorder=function(i){var r={breakpoint:960,targetContainer:t(this).parent(),targetPosition:"start"};return i&&t.extend(r,i),this.each(function(i,a){var o={};t(a).prev().length?o.prev=t(a).prev()[0]:o.parent=t(a).parent()[0];var n="flexorder-flexed"+e,l=function(){var e=t(window).width();e<r.breakpoint&&!t(a.parentNode).hasClass(n)?("start"===r.targetPosition?(t(a).prependTo(r.targetContainer[i]),t(a).before("\n")):t(a).appendTo(r.targetContainer[i]),t(a.parentNode).addClass(n)):e>=r.breakpoint&&t(a.parentNode).hasClass(n)&&(t(a.parentNode).removeClass(n),o.parent?t(o.parent).prepend(a):t(o.prev).after(a).after("\n"))};l(),t(window).resize(function(){var t=null;return function(){clearTimeout(t),t=setTimeout(l,100)}}()),++e})}}(jQuery),function(t,e,i){function r(t){var e={},r=/^jQuery\d+$/;return i.each(t.attributes,function(t,i){i.specified&&!r.test(i.name)&&(e[i.name]=i.value)}),e}function a(t,r){var a=this,o=i(a);if(a.value==o.attr("placeholder")&&o.hasClass("placeholder"))if(o.data("placeholder-password")){if(o=o.hide().next().show().attr("id",o.removeAttr("id").data("placeholder-id")),t===!0)return o[0].value=r;o.focus()}else a.value="",o.removeClass("placeholder"),a==e.activeElement&&a.select()}function o(){var t,e=this,o=i(e),n=this.id;if(""==e.value){if("password"==e.type){if(!o.data("placeholder-textinput")){try{t=o.clone().attr({type:"text"})}catch(l){t=i("<input>").attr(i.extend(r(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":n}).bind("focus.placeholder",a),o.data({"placeholder-textinput":t,"placeholder-id":n}).before(t)}o=o.removeAttr("id").hide().prev().attr("id",n).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}var n,l,s="placeholder"in e.createElement("input"),c="placeholder"in e.createElement("textarea"),u=i.fn,f=i.valHooks;s&&c?(l=u.placeholder=function(){return this},l.input=l.textarea=!0):(l=u.placeholder=function(){var t=this;return t.filter((s?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":a,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),t},l.input=s,l.textarea=c,n={get:function(t){var e=i(t);return e.data("placeholder-enabled")&&e.hasClass("placeholder")?"":t.value},set:function(t,r){var n=i(t);return n.data("placeholder-enabled")?(""==r?(t.value=r,t!=e.activeElement&&o.call(t)):n.hasClass("placeholder")?a.call(t,!0,r)||(t.value=r):t.value=r,n):t.value=r}},s||(f.input=n),c||(f.textarea=n),i(function(){i(e).delegate("form","submit.placeholder",function(){var t=i(".placeholder",this).each(a);setTimeout(function(){t.each(o)},10)})}),i(t).bind("beforeunload.placeholder",function(){i(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),/*!
 * jQuery Preload Plugin 1.0
 *
 * Copyright 2013 Bart Tegenbosch <bart@onedott.nl>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
function(t){"use strict";var e={interval:500,notifyErrors:!1};t.preload=function(i,r){if(!i||0===i.length)throw new Error("No sources to preload");i&&!i.shift&&(i=[i.toString()]);var a=t.extend(e,r),o=[],n=[],l=t.Deferred();return t.each(i,function(t,e){var r=new Image;r.src=e.toString();var s=window.setInterval(function(){r.complete&&(l.notify(r,!1),n.push(r),window.clearInterval(s)),n.length+o.length==i.length&&l.resolve(n,o)},a.interval);r.onerror=function(){a.notifyErrors&&l.notify(r,!0),o.push(e),window.clearInterval(s)}}),l.promise()}}(jQuery);/*
 * SVGeezy.js 1.0
 *
 * Copyright 2012, Ben Howdle http://twostepmedia.co.uk
 * Released under the WTFPL license
 * http://sam.zoy.org/wtfpl/
 *
 * Date: Sun Aug 26 20:38 2012 GMT
 */
var svgeezy=function(){return{init:function(t,e){this.avoid=t||!1,this.filetype=e||"png",this.svgSupport=this.supportsSvg(),this.svgSupport||(this.images=document.getElementsByTagName("img"),this.imgL=this.images.length,this.fallbacks())},fallbacks:function(){for(;this.imgL--;)if(!this.hasClass(this.images[this.imgL],this.avoid)||!this.avoid){var t=this.images[this.imgL].getAttribute("src");if(null===t)continue;if("svg"==this.getFileExt(t)){var e=t.replace(".svg","."+this.filetype);this.images[this.imgL].setAttribute("src",e)}}},getFileExt:function(t){var e=t.split(".").pop();return-1!==e.indexOf("?")&&(e=e.split("?")[0]),e},hasClass:function(t,e){return(" "+t.className+" ").indexOf(" "+e+" ")>-1},supportsSvg:function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")}}}();!function(t){function e(t){if(t){var e="@2x",i=t.substr(0,t.lastIndexOf(".")),r=i.slice(-3);return r===e?!0:!1}}function i(t){if(t){var e=t.split(".").pop(),i=t.substr(0,t.lastIndexOf(".")),r=i+"@2x."+e;return r}}function r(){if(v){var r=t("#imageblock-link").attr("href");if(!e(r)){var a=i(r);t.ajax({url:a,type:"HEAD",error:function(){},success:function(){t("#imageblock-link").attr("href",a)}})}t("#filmstrip a").each(function(){var r=t(this),a=t(this).attr("href"),o=t(this).children("img").attr("data-medium");if(!e(a)){var n=i(a);t.ajax({url:n,type:"HEAD",error:function(){},success:function(){t(r).attr("href",n)}})}if(!e(o)){var l=i(o);t.ajax({url:l,type:"HEAD",error:function(){},success:function(){t(r).children("img").attr("data-medium",l)}})}})}}function a(){v&&t(".portfolio__item__visual").each(function(){var e=t(this),r=t(e).css("backgroundImage"),a=r.substring(4).slice(0,-1),o=i(a);t.ajax({url:o,type:"HEAD",error:function(){},success:function(){t(e).css({backgroundImage:"url("+o+")"})}})})}function o(e){e?(t("textarea").addClass("active"),t("input[type='submit']").addClass("active")):""===t("textarea").val()&&(t("textarea").removeClass("active"),t("input[type='submit']").removeClass("active"))}function n(){t(".single__filmstrip").flexorder({breakpoint:1024,targetContainer:t(".single__imageblock"),targetPosition:"end"}),t(".single--404__block1 .contact").flexorder({breakpoint:768,targetContainer:t(".single--404__block2"),targetPosition:"end"})}function l(){t("input, textarea").placeholder()}function s(){svgeezy.init(!1,"png")}function c(){var e=t(window).height(),i=t(".lightbox__img").outerHeight(),r=Math.floor((e-i)/2);t(".lightbox__content").css("top",r+"px")}function u(e){"close"===e&&t(".lightbox").fadeOut("fast")}function f(e){var i=t("#filmstrip a[href='"+e+"']").next().attr("href"),r=t("#filmstrip a[href='"+e+"']").prev().attr("href");if(i||(i=t("#filmstrip a:first").attr("href")),r||(r=t("#filmstrip a:last").attr("href")),t(".lightbox").length>0)t(".lightbox__img").html('<img src="'+e+'" id="lightbox-img">'),t(".lightbox").fadeIn("fast");else{if(r===i)var a='<div class="lightbox"><div class="lightbox__content"><div class="lightbox__img"><img src="'+e+'" id="lightbox-img">'+"</div>"+"</div>"+"</div>";else var a='<div class="lightbox"><div class="lightbox__content"><div class="lightbox__img"><img src="'+e+'" id="lightbox-img">'+"</div>"+'<div class="lightbox__controls">'+'<a class="lightbox__control--left"></a>'+'<a class="lightbox__control--right"></a>'+"</div>"+"</div>"+"</div>";t("body").append(a)}t(".lightbox__control--right").attr("href",i),t(".lightbox__control--left").attr("href",r)}function h(e,r){if(v){var a=i(e),o=i(r);t.ajax({url:o,type:"HEAD",error:function(){t("#imageblock-link").attr("href",r)},success:function(){t("#imageblock-link").attr("href",o)}}),t.ajax({url:a,type:"HEAD",error:function(){t("#imageblock-link img").attr("src",e)},success:function(){t("#imageblock-link img").attr("src",a)}})}else t("#imageblock-link").attr("href",r),t("#imageblock-link img").attr("src",e)}function d(){t("#filmstrip a").each(function(){var r=t(this).attr("href"),a=t(this).children("img").attr("data-medium"),o=new Image,n=new Image;if(v){if(!e(r)){var l=i(r);t.ajax({url:l,type:"HEAD",success:function(){r=l,o.src=r}})}if(!e(a)){var s=i(a);t.ajax({url:s,type:"HEAD",success:function(){a=s,n.src=r}})}}else o.src=r,n.src=r})}var v=window.devicePixelRatio>=1.5,p=function(){var t={};return function(e,i,r){r||(r="1"),t[r]&&clearTimeout(t[r]),t[r]=setTimeout(e,i)}}();a(),r(),n(),s(),l(),d(),t("#menu-trigger").click(function(){t("html").toggleClass("nav-open")}),t(".header-nav__message a").click(function(){t("html").toggleClass("nav-open")}),t("textarea").focusin(function(){ga("send","event","textarea","focus"),o(!0)}),t("textarea").focusout(function(){ga("send","event","textarea","blur"),o()});var g;t(".portfolio__item").bind("touchstart",function(){ga("send","event","portfolioitem","hover","touch hover in"),g=setTimeout(function(){ga("send","event","portfolioitem","hover","touch hover duration",1)},1e3),t(".portfolio__item.active").removeClass("active"),t(this).addClass("active")}),t(".portfolio__item").bind("touchend",function(){ga("send","event","portfolioitem","hover","touch hover out"),clearTimeout(g),t(".portfolio__item.active").removeClass("active"),t(this).removeClass("active")}),t(".portfolio__item").hover(function(){ga("send","event","portfolioitem","hover","mouse hover in"),g=setTimeout(function(){ga("send","event","portfolioitem","hover","mouse hover duration",1)},1e3)},function(){ga("send","event","portfolioitem","hover","mouse hover out"),clearTimeout(g)}),t("body").on("click",".lightbox__controls a",function(e){e.preventDefault();var i=t(this).attr("href");f(i),t.preload(i,{interval:200}).progress(function(){c()})}),t("#imageblock").on("click","a#imageblock-link",function(e){e.preventDefault();var i=t("#imageblock a").attr("href");f(i),t.preload(i,{interval:200}).progress(function(){c()})}),t("body").on("click touchstart",".lightbox, .lightbox__controls",function(e){e.stopPropagation(),"lightbox__controls"!==t(this).attr("class")&&u("close")}),t("#filmstrip").on("click","a",function(e){e.preventDefault();var i=t(this).attr("href"),r=t(this).children("img").attr("data-medium");h(r,i)}),t(window).resize(function(){p(function(){c()},500,"reset1")}),t(window).scroll(function(){t(".portfolio__item.active").removeClass("active")})}(jQuery);
;