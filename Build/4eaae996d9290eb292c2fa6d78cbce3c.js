/*
 * jquery.flexorder.js 1.2
 *
 * Copyright 2013, Tommy Fisher http://www.tommyfisher.net
 *
 */
!function(t){"use strict";var e=0;t.fn.flexorder=function(i){var a={breakpoint:960,targetContainer:t(this).parent(),targetPosition:"start"};return i&&t.extend(a,i),this.each(function(i,r){var n={};t(r).prev().length?n.prev=t(r).prev()[0]:n.parent=t(r).parent()[0];var o="flexorder-flexed"+e,l=function(){var e=t(window).width();e<a.breakpoint&&!t(r.parentNode).hasClass(o)?("start"===a.targetPosition?(t(r).prependTo(a.targetContainer[i]),t(r).before("\n")):t(r).appendTo(a.targetContainer[i]),t(r.parentNode).addClass(o)):e>=a.breakpoint&&t(r.parentNode).hasClass(o)&&(t(r.parentNode).removeClass(o),n.parent?t(n.parent).prepend(r):t(n.prev).after(r).after("\n"))};l(),t(window).resize(function(){var t=null;return function(){clearTimeout(t),t=setTimeout(l,100)}}()),++e})}}(jQuery),function(t,e,i){function a(t){var e={},a=/^jQuery\d+$/;return i.each(t.attributes,function(t,i){i.specified&&!a.test(i.name)&&(e[i.name]=i.value)}),e}function r(t,a){var r=this,n=i(r);if(r.value==n.attr("placeholder")&&n.hasClass("placeholder"))if(n.data("placeholder-password")){if(n=n.hide().next().show().attr("id",n.removeAttr("id").data("placeholder-id")),t===!0)return n[0].value=a;n.focus()}else r.value="",n.removeClass("placeholder"),r==e.activeElement&&r.select()}function n(){var t,e=this,n=i(e),o=this.id;if(""==e.value){if("password"==e.type){if(!n.data("placeholder-textinput")){try{t=n.clone().attr({type:"text"})}catch(l){t=i("<input>").attr(i.extend(a(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":o}).bind("focus.placeholder",r),n.data({"placeholder-textinput":t,"placeholder-id":o}).before(t)}n=n.removeAttr("id").hide().prev().attr("id",o).show()}n.addClass("placeholder"),n[0].value=n.attr("placeholder")}else n.removeClass("placeholder")}var o,l,s="placeholder"in e.createElement("input"),c="placeholder"in e.createElement("textarea"),u=i.fn,f=i.valHooks;s&&c?(l=u.placeholder=function(){return this},l.input=l.textarea=!0):(l=u.placeholder=function(){var t=this;return t.filter((s?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":r,"blur.placeholder":n}).data("placeholder-enabled",!0).trigger("blur.placeholder"),t},l.input=s,l.textarea=c,o={get:function(t){var e=i(t);return e.data("placeholder-enabled")&&e.hasClass("placeholder")?"":t.value},set:function(t,a){var o=i(t);return o.data("placeholder-enabled")?(""==a?(t.value=a,t!=e.activeElement&&n.call(t)):o.hasClass("placeholder")?r.call(t,!0,a)||(t.value=a):t.value=a,o):t.value=a}},s||(f.input=o),c||(f.textarea=o),i(function(){i(e).delegate("form","submit.placeholder",function(){var t=i(".placeholder",this).each(r);setTimeout(function(){t.each(n)},10)})}),i(t).bind("beforeunload.placeholder",function(){i(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),/*!
 * jQuery Preload Plugin 1.0
 *
 * Copyright 2013 Bart Tegenbosch <bart@onedott.nl>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
function(t){"use strict";var e={interval:500,notifyErrors:!1};t.preload=function(i,a){if(!i||0===i.length)throw new Error("No sources to preload");i&&!i.shift&&(i=[i.toString()]);var r=t.extend(e,a),n=[],o=[],l=t.Deferred();return t.each(i,function(t,e){var a=new Image;a.src=e.toString();var s=window.setInterval(function(){a.complete&&(l.notify(a,!1),o.push(a),window.clearInterval(s)),o.length+n.length==i.length&&l.resolve(o,n)},r.interval);a.onerror=function(){r.notifyErrors&&l.notify(a,!0),n.push(e),window.clearInterval(s)}}),l.promise()}}(jQuery);/*
 * SVGeezy.js 1.0
 *
 * Copyright 2012, Ben Howdle http://twostepmedia.co.uk
 * Released under the WTFPL license
 * http://sam.zoy.org/wtfpl/
 *
 * Date: Sun Aug 26 20:38 2012 GMT
 */
var svgeezy=function(){return{init:function(t,e){this.avoid=t||!1,this.filetype=e||"png",this.svgSupport=this.supportsSvg(),this.svgSupport||(this.images=document.getElementsByTagName("img"),this.imgL=this.images.length,this.fallbacks())},fallbacks:function(){for(;this.imgL--;)if(!this.hasClass(this.images[this.imgL],this.avoid)||!this.avoid){var t=this.images[this.imgL].getAttribute("src");if(null===t)continue;if("svg"==this.getFileExt(t)){var e=t.replace(".svg","."+this.filetype);this.images[this.imgL].setAttribute("src",e)}}},getFileExt:function(t){var e=t.split(".").pop();return-1!==e.indexOf("?")&&(e=e.split("?")[0]),e},hasClass:function(t,e){return(" "+t.className+" ").indexOf(" "+e+" ")>-1},supportsSvg:function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")}}}();!function(t){function e(t){if(t){var e="@2x",i=t.substr(0,t.lastIndexOf(".")),a=i.slice(-3);return a===e?!0:!1}}function i(t){if(t){var e=t.split(".").pop(),i=t.substr(0,t.lastIndexOf(".")),a=i+"@2x."+e;return a}}function a(){if(p){var a=t("#imageblock-link").attr("href");if(!e(a)){var r=i(a);t.ajax({url:r,type:"HEAD",error:function(){},success:function(){t("#imageblock-link").attr("href",r)}})}t("#filmstrip a").each(function(){var a=t(this),r=t(this).attr("href"),n=t(this).children("img").attr("data-medium");if(!e(r)){var o=i(r);t.ajax({url:o,type:"HEAD",error:function(){},success:function(){t(a).attr("href",o)}})}if(!e(n)){var l=i(n);t.ajax({url:l,type:"HEAD",error:function(){},success:function(){t(a).children("img").attr("data-medium",l)}})}})}}function r(){p&&t(".portfolio__item__visual").each(function(){var e=t(this),a=t(e).css("backgroundImage"),r=a.substring(4).slice(0,-1),n=i(r);t.ajax({url:n,type:"HEAD",error:function(){},success:function(){t(e).css({backgroundImage:"url("+n+")"})}})})}function n(e){e?(t("textarea").addClass("active"),t("input[type='submit']").addClass("active")):""===t("textarea").val()&&(t("textarea").removeClass("active"),t("input[type='submit']").removeClass("active"))}function o(){t(".single__filmstrip").flexorder({breakpoint:1024,targetContainer:t(".single__imageblock"),targetPosition:"end"}),t(".single--404__block1 .contact").flexorder({breakpoint:768,targetContainer:t(".single--404__block2"),targetPosition:"end"})}function l(){t("input, textarea").placeholder()}function s(){svgeezy.init(!1,"png")}function c(){var e=t(window).height(),i=t(".lightbox__img").outerHeight(),a=Math.floor((e-i)/2);t(".lightbox__content").css("top",a+"px")}function u(e){"close"===e&&t(".lightbox").fadeOut("fast")}function f(e){var i=t("#filmstrip a[href='"+e+"']").next().attr("href"),a=t("#filmstrip a[href='"+e+"']").prev().attr("href");if(i||(i=t("#filmstrip a:first").attr("href")),a||(a=t("#filmstrip a:last").attr("href")),t(".lightbox").length>0)t(".lightbox__img").html('<img src="'+e+'" id="lightbox-img">'),t(".lightbox").fadeIn("fast");else{if(a===i)var r='<div class="lightbox"><div class="lightbox__content"><div class="lightbox__img"><img src="'+e+'" id="lightbox-img">'+"</div>"+"</div>"+"</div>";else var r='<div class="lightbox"><div class="lightbox__content"><div class="lightbox__img"><img src="'+e+'" id="lightbox-img">'+"</div>"+'<div class="lightbox__controls">'+'<a class="lightbox__control--left"></a>'+'<a class="lightbox__control--right"></a>'+"</div>"+"</div>"+"</div>";t("body").append(r)}t(".lightbox__control--right").attr("href",i),t(".lightbox__control--left").attr("href",a)}function h(e,a){if(p){var r=i(e),n=i(a);t.ajax({url:n,type:"HEAD",error:function(){t("#imageblock-link").attr("href",a)},success:function(){t("#imageblock-link").attr("href",n)}}),t.ajax({url:r,type:"HEAD",error:function(){t("#imageblock-link img").attr("src",e)},success:function(){t("#imageblock-link img").attr("src",r)}})}else t("#imageblock-link").attr("href",a),t("#imageblock-link img").attr("src",e)}function d(){t("#filmstrip a").each(function(){var a=t(this).attr("href"),r=t(this).children("img").attr("data-medium"),n=new Image,o=new Image;if(p){if(!e(a)){var l=i(a);t.ajax({url:l,type:"HEAD",success:function(){a=l,n.src=a}})}if(!e(r)){var s=i(r);t.ajax({url:s,type:"HEAD",success:function(){r=s,o.src=a}})}}else n.src=a,o.src=a})}var p=window.devicePixelRatio>=1.5,g=function(){var t={};return function(e,i,a){a||(a="1"),t[a]&&clearTimeout(t[a]),t[a]=setTimeout(e,i)}}();r(),a(),o(),s(),l(),d(),t("#menu-trigger").click(function(){t("html").toggleClass("nav-open")}),t(".header-nav__message a").click(function(){t("html").toggleClass("nav-open")}),t("textarea").focusin(function(){n(!0)}),t("textarea").focusout(function(){n()}),t(".portfolio__item").bind("touchstart",function(){t(".portfolio__item.active").removeClass("active"),t(this).addClass("active")}),t("body").on("click",".lightbox__controls a",function(e){e.preventDefault();var i=t(this).attr("href");f(i),t.preload(i,{interval:200}).progress(function(){c()})}),t("#imageblock").on("click","a#imageblock-link",function(e){e.preventDefault();var i=t("#imageblock a").attr("href");f(i),t.preload(i,{interval:200}).progress(function(){c()})}),t("body").on("click touchstart",".lightbox, .lightbox__controls",function(e){e.stopPropagation(),"lightbox__controls"!==t(this).attr("class")&&u("close")}),t("#filmstrip").on("click","a",function(e){e.preventDefault();var i=t(this).attr("href"),a=t(this).children("img").attr("data-medium");h(a,i)}),t(window).resize(function(){g(function(){c()},500,"reset1")})}(jQuery);
;